
<div class="bg-blue-500/50 rounded-full blur-[100px] w-110 h-110 absolute -z-1 top-250 right-[35%] "></div>

<div class="flex flex-col justify-center items-center mt-1 sm:mt-3 md:mt-5 w-full px-4 sm:px-0 h-auto">
  <h2 class="font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-4xl text-center text-blue-600 px-2 sm:px-0 leading-tight">AGENDA TU LLAMADA ONE-ON-ONE</h2>
  <p class="font-medium text-base sm:text-lg md:text-xl lg:text-lg text-center text-gray-950/80 w-full max-w-2xl mt-2 sm:mt-3 px-2 sm:px-0 leading-relaxed">Reservá una llamada de sólo 30 minutos para que podamos conocernos y ver cómo puedo ayudarte, sin compromiso.</p>
  <img src="/icons/down-arrow.svg" alt="" class="w-8 h-8 sm:w-10 sm:h-10 mt-3 sm:mt-5 animate-bounce" />
  
  
  <!-- Calendly inline widget begin -->
  <div
    class="calendly-inline-widget w-full px-2 sm:px-0"
    data-url="https://calendly.com/pfistercontacto/30min"
    style="min-height: 800px !important; height: 500px !important; width: 95%; margin-top:0px; gap:0px; display:flex; overflow: visible !important;"
  >
  </div>
  <script
    type="text/javascript"
    src="https://assets.calendly.com/assets/external/widget.js"
    async
  ></script>
  <!-- Calendly inline widget end -->
</div>

<script>
  // Declaraciones de tipos para evitar errores de linter
  declare global {
    interface Window {
      fbq: any;
      Calendly: any;
    }
  }

  // Función para detectar cuando alguien se registra en Calendly
  function initCalendlyTracking() {
    // Esperar a que Calendly se cargue
    // @ts-ignore - Calendly es una API externa
    if (typeof Calendly !== 'undefined') {
      // Escuchar el evento de reserva exitosa
      // @ts-ignore - Calendly es una API externa
      Calendly.initInlineWidget({
        url: 'https://calendly.com/pfistercontacto/30min',
        parentElement: document.querySelector('.calendly-inline-widget'),
        onEventScheduled: function(e: any) {
          // Disparar evento de conversión de Meta
          // @ts-ignore - fbq es la API de Meta Pixel
          if (typeof fbq !== 'undefined') {
            // @ts-ignore - fbq es la API de Meta Pixel
            fbq('track', 'Contact');
            console.log('Evento de conversión disparado: Contact');
          }
        }
      });
    } else {
      // Si Calendly no está cargado, intentar de nuevo en 1 segundo
      setTimeout(initCalendlyTracking, 1000);
    }
  }

  // Inicializar el tracking cuando el DOM esté listo
  document.addEventListener('DOMContentLoaded', function() {
    // Esperar un poco más para asegurar que Calendly se haya cargado
    setTimeout(initCalendlyTracking, 2000);
  });

  // También escuchar el evento de Calendly cuando se carga
  window.addEventListener('message', function(e: MessageEvent) {
    if (e.data.event && e.data.event.indexOf('calendly') === 0) {
      if (e.data.event === 'calendly.event_scheduled') {
        // Disparar evento de conversión de Meta
        // @ts-ignore - fbq es la API de Meta Pixel
        if (typeof fbq !== 'undefined') {
          // @ts-ignore - fbq es la API de Meta Pixel
          fbq('track', 'Contact');
          console.log('Evento de conversión disparado: Contact');
        }
      }
    }
  });
</script>

<style>
  .calendly-inline-widget {
    min-height: 800px !important;
    height: 500px !important;
    overflow: visible !important;
  }
  
  .calendly-inline-widget iframe {
    min-height: 800px !important;
    height: 500px !important;
    overflow: visible !important;
  }
</style>